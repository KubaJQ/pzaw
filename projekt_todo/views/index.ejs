<%- include('head.partial.ejs') %>
<main>
  <h2><%= title %></h2>

  <section class="add">
    <form action="/tasks/add" method="POST">
      <input type="text" name="text" placeholder="Nowe zadanie" required />
      <button type="submit">Dodaj</button>
    </form>
  </section>

  <section class="list">
    <% if (tasks.length === 0) { %>
      <p>Brak zadań.</p>
    <% } else { %>
      <ul>
        <% tasks.forEach(function(t) { %>
          <li class="<%= t.done ? 'done' : '' %>">
            <form class="inline" action="/tasks/toggle" method="POST" style="display:inline">
              <input type="hidden" name="id" value="<%= t.id %>"/>
              <button type="submit"><%= t.done ? '↺' : '✓' %></button>
            </form>
            <span><%= t.text %></span>
            <form class="inline" action="/tasks/delete" method="POST" style="display:inline">
              <input type="hidden" name="id" value="<%= t.id %>"/>
              <button type="submit">Usuń</button>
            </form>
          </li>
        <% }) %>
      </ul>
    <% } %>
  </section>
</main>
<%- include('foot.partial.ejs') %>
